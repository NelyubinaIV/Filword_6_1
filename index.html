<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∏–º–Ω–∏–π –§–∏–ª–≤–æ—Ä–¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-image: url('images/winter-bg.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        /* –°–Ω–µ–∂–∏–Ω–∫–∏ –∞–Ω–∏–º–∞—Ü–∏—è */
        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); opacity: 1; }
            100% { transform: translateY(100vh) translateX(20px); opacity: 0.3; }
        }

        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 20px;
            opacity: 0.8;
            pointer-events: none;
            animation: snowfall linear infinite;
            z-index: 1;
        }

        .game-container {
            display: flex;
            gap: 30px;
            max-width: 1200px;
            width: 100%;
            align-items: flex-start;
            position: relative;
            z-index: 10;
        }

        .game-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(230, 247, 255, 0.9));
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(0, 50, 100, 0.4), inset 0 0 30px rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 255, 255, 0.6);
            flex: 1;
        }

        .title {
            text-align: center;
            background: linear-gradient(45deg, #0066cc, #00ccff, #0066cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 32px;
            margin-bottom: 25px;
            text-shadow: 0 0 10px rgba(0, 150, 255, 0.3);
            font-weight: bold;
            letter-spacing: 2px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 4px;
            margin-bottom: 25px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            padding: 10px;
            background: rgba(200, 230, 255, 0.2);
            border-radius: 15px;
            user-select: none;
			touch-action: none;   /* ‚Üê –≤–∞–∂–Ω–æ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
        }

        .cell {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #ffffff, #e6f7ff);
            border: 2px solid #3399ff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            color: #003366;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 3px 8px rgba(0, 100, 200, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.8);
            user-select: none;
            position: relative;
        }

        .cell:hover:not(.found) {
            background: linear-gradient(145deg, #e6f7ff, #cce6ff);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 150, 255, 0.4);
        }

        .cell.selected {
            background: linear-gradient(145deg, #66ccff, #3399ff);
            border: 3px solid #0066cc;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 100, 255, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .cell.found {
            background: linear-gradient(145deg, #ff6b6b, #ee5555);
            color: white;
            border: 3px solid #cc0000;
            pointer-events: none;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
            animation: foundPulse 0.5s ease;
        }

        @keyframes foundPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .score-section {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fffacd, #fff8dc);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 200, 0, 0.3);
            border: 3px solid rgba(255, 215, 0, 0.6);
            max-width: 600px;
            margin: 0 auto;
        }

        .score-section p {
            font-size: 20px;
            margin-bottom: 10px;
            color: #cc6600;
            font-weight: bold;
        }

        .score {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6600, #ffcc00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer {
            font-size: 28px;
            font-weight: bold;
            color: #0066cc;
            margin-bottom: 15px;
        }

        .timer.warning {
            color: #ff6600;
            animation: pulse 1s infinite;
        }

        .timer.danger {
            color: #cc0000;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .restart-btn {
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            transition: all 0.3s;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.6);
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–±–µ–¥—ã */
        .victory-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .victory-content {
            background: linear-gradient(135deg, #fff, #fffacd);
            margin: 10% auto;
            padding: 40px;
            border: 5px solid #ffcc00;
            border-radius: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(255, 215, 0, 0.8);
            text-align: center;
            position: relative;
            animation: victoryAppear 0.5s ease;
        }

        @keyframes victoryAppear {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .victory-content h2 {
            font-size: 48px;
            color: #ff6600;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(255, 100, 0, 0.3);
        }

        .victory-content p {
            font-size: 24px;
            color: #cc6600;
            margin-bottom: 30px;
        }

        /* –§–µ–π–µ—Ä–≤–µ—Ä–∫ */
        .firework {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2001;
        }

        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å—Ç–µ–∫–ª–æ */
        .timeout-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .timeout-content {
            background: linear-gradient(135deg, #fff, #ffe6e6);
            margin: 15% auto;
            padding: 40px;
            border: 5px solid #ff6b6b;
            border-radius: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(255, 0, 0, 0.5);
            text-align: center;
            animation: victoryAppear 0.5s ease;
        }

        .timeout-content h2 {
            font-size: 36px;
            color: #cc0000;
            margin-bottom: 20px;
        }

        .timeout-content p {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .sound-btn, .info-btn {
            position: absolute;
            top: 20px;
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, #fff, #e6f7ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 100, 200, 0.3);
            transition: all 0.3s;
            z-index: 100;
            border: 3px solid rgba(51, 153, 255, 0.5);
        }

        .sound-btn {
            right: 20px;
        }

        .info-btn {
            right: 90px;
        }

        .sound-btn:hover, .info-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 20px rgba(0, 150, 255, 0.5);
        }

        .sidebar {
            background: linear-gradient(135deg, rgba(255, 250, 240, 0.95), rgba(255, 240, 245, 0.9));
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(200, 0, 50, 0.3), inset 0 0 30px rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(15px);
            min-width: 280px;
            border: 3px solid rgba(255, 200, 200, 0.6);
        }

        .sidebar h2 {
            background: linear-gradient(45deg, #cc0000, #ff6b6b, #cc0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .words-list {
            list-style: none;
        }

        .words-list li {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #fff, #ffe6e6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 18px;
            color: #666;
            border: 2px solid #ffcccc;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .words-list li.found-word {
            background: linear-gradient(135deg, #90EE90, #66cc66);
            color: white;
            border: 2px solid #00aa00;
            box-shadow: 0 4px 10px rgba(0, 200, 0, 0.3);
            transform: scale(1.02);
        }

        .word-text {
            font-weight: bold;
        }

        .star {
            font-size: 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .found-word .star {
            opacity: 1;
            animation: starSpin 0.5s ease;
        }

        @keyframes starSpin {
            0% { transform: rotate(0deg) scale(0); }
            50% { transform: rotate(180deg) scale(1.3); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #fff, #e6f7ff);
            margin: 5% auto;
            padding: 30px;
            border: 3px solid #3399ff;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .close {
            color: #cc0000;
            float: right;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            line-height: 20px;
        }

        .close:hover {
            color: #ff0000;
            transform: scale(1.2);
        }

        .modal h2 {
            color: #0066cc;
            margin-bottom: 15px;
            font-size: 26px;
        }

        .modal p {
            color: #333;
            line-height: 1.8;
            font-size: 16px;
            margin-bottom: 10px;
        }

        @media (max-width: 899px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }

            .sidebar {
                width: 100%;
                max-width: 600px;
            }

            .cell {
                font-size: 18px;
            }

            .title {
                font-size: 26px;
            }

            .info-btn {
                right: auto;
                left: 20px;
            }
        }

        @media (max-width: 600px) {
            .cell {
                font-size: 16px;
            }

            .title {
                font-size: 22px;
            }

            .score-section p {
                font-size: 18px;
            }

            .score {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <!-- –°–Ω–µ–∂–∏–Ω–∫–∏ –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã -->
    <div class="snowflake" style="left: 10%; animation-duration: 10s; animation-delay: 0s;">‚ùÑ</div>
    <div class="snowflake" style="left: 20%; animation-duration: 8s; animation-delay: 1s;">‚ùÖ</div>
    <div class="snowflake" style="left: 30%; animation-duration: 12s; animation-delay: 2s;">‚ùÜ</div>
    <div class="snowflake" style="left: 40%; animation-duration: 9s; animation-delay: 3s;">‚ùÑ</div>
    <div class="snowflake" style="left: 50%; animation-duration: 11s; animation-delay: 0.5s;">‚ùÖ</div>
    <div class="snowflake" style="left: 60%; animation-duration: 10s; animation-delay: 1.5s;">‚ùÜ</div>
    <div class="snowflake" style="left: 70%; animation-duration: 8s; animation-delay: 2.5s;">‚ùÑ</div>
    <div class="snowflake" style="left: 80%; animation-duration: 12s; animation-delay: 0.8s;">‚ùÖ</div>
    <div class="snowflake" style="left: 90%; animation-duration: 9s; animation-delay: 2s;">‚ùÜ</div>

    <div class="info-btn" onclick="showInstructions()" title="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è">‚ÑπÔ∏è</div>
    <div class="sound-btn" id="soundToggle" title="–í–∫–ª/–í—ã–∫–ª –∑–≤—É–∫">üîä</div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
    <div id="instructionModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeInstructions()">&times;</span>
            <h2>üéÑ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å üéÑ</h2>
            <p><strong>–¶–µ–ª—å –∏–≥—Ä—ã:</strong> –ù–∞–π—Ç–∏ –≤—Å–µ 10 —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ –≤ —Å–µ—Ç–∫–µ –±—É–∫–≤.</p>
            <p><strong>–ü—Ä–∞–≤–∏–ª–∞:</strong></p>
            <p>‚Ä¢ –ù–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –Ω–∞ –ø–µ—Ä–≤–æ–π –±—É–∫–≤–µ —Å–ª–æ–≤–∞</p>
            <p>‚Ä¢ –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –º—ã—à–∫–æ–π –ø–æ –±—É–∫–≤–∞–º —Å–ª–æ–≤–∞, –Ω–µ –æ—Ç–ø—É—Å–∫–∞—è –∫–Ω–æ–ø–∫—É</p>
            <p>‚Ä¢ –°–ª–æ–≤–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –∏–ª–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ</p>
            <p>‚Ä¢ –û—Ç–ø—É—Å—Ç–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –±—É–∫–≤–µ</p>
            <p>‚Ä¢ –ï—Å–ª–∏ —Å–ª–æ–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ, –æ–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º!</p>
            <p>‚Ä¢ –ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ - –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏—Å—á–µ–∑–Ω–µ—Ç</p>
            <p>‚Ä¢ –ó–∞ –∫–∞–∂–¥–æ–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 10 –±–∞–ª–ª–æ–≤</p>
            <p><strong>–£–¥–∞—á–∏! üéÖ</strong></p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–±–µ–¥—ã -->
    <div id="victoryModal" class="victory-modal">
        <div class="victory-content">
            <h2>üéâ –ü–û–ë–ï–î–ê! üéâ</h2>
            <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –Ω–∞—à–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞!</p>
            <p>–í—Ä–µ–º—è: <span id="victoryTime"></span></p>
            <p>–û—á–∫–∏: <span id="victoryScore"></span></p>
            <button class="restart-btn" onclick="restartGame()">üéÑ –ò–≥—Ä–∞—Ç—å –µ—â—ë üéÑ</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ -->
    <div id="timeoutModal" class="timeout-modal">
        <div class="timeout-content">
            <h2>‚è∞ –í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ! ‚è∞</h2>
            <p>–í—ã –Ω–∞—à–ª–∏ <span id="timeoutFound"></span> –∏–∑ 10 —Å–ª–æ–≤</p>
            <p>–û—á–∫–∏: <span id="timeoutScore"></span></p>
            <button class="restart-btn" onclick="restartGame()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å üîÑ</button>
        </div>
    </div>

    <div class="game-container">
        <div class="game-content">
            <h1 class="title">üéÑ –°–ª–æ–≤–∞—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ ‚ùÑÔ∏è</h1>
            
            <!-- –¢–∞–π–º–µ—Ä -->
            <div class="timer" id="timer">‚è±Ô∏è 3:00</div>
            
            <div class="grid" id="grid"></div>
            
            <!-- –°—á—ë—Ç –ø–æ–¥ —Ñ–∏–ª–≤–æ—Ä–¥–æ–º -->
            <div class="score-section">
                <p>–ù–∞–π–¥–µ–Ω–æ: <span class="score" id="foundCount">0</span> / 10</p>
                <p>–û—á–∫–∏: <span class="score" id="scoreDisplay">0</span></p>
            </div>
        </div>

        <div class="sidebar">
            <h2>üéÅ –ù–∞–π–¥–∏ —Å–ª–æ–≤–∞ üéÅ</h2>
            <ul class="words-list" id="wordsList"></ul>
        </div>
    </div>

    <!-- –ó–≤—É–∫–∏ -->
		<audio id="clickSound" preload="auto">
		<source src="audio/click.mp3" type="audio/mpeg">
		</audio>

		<audio id="successSound" preload="auto">
  <!-- –∑–≤—É–∫, –∫–æ–≥–¥–∞ —Å–ª–æ–≤–æ –Ω–∞–π–¥–µ–Ω–æ -->
		<source src="audio/word.mp3" type="audio/mpeg">
		</audio>

	<audio id="victorySound" preload="auto">
		<!-- –æ—Å–Ω–æ–≤–Ω–æ–π –∑–≤—É–∫ –ø–æ–±–µ–¥—ã -->
	<source src="audio/victory.mp3" type="audio/mpeg">
	</audio>

	<audio id="fireworkSound" preload="auto">
		<!-- –∑–≤—É–∫ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞ -->
		<source src="audio/firework.mp3" type="audio/mpeg">
	</audio>
	<audio id="timeoutSound" preload="auto">
    <source src="audio/timeout.mp3" type="audio/mpeg">
</audio>



    <script>
        // –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
        const WORDS = ['—ç–º–±–ª–µ–º–∞', '–∏–∑–∂–æ–≥–∞', '–∫–∞–º–æ—Ä–∫–∞', '–±–∞—Å—Å–µ–π–Ω', '–≥–µ–∫—Ç–∞—Ä', '–ø—Ä–∏–≤–∏–ª–µ–≥–∏—è', '–≥–æ—Å—Ç–∏–Ω–∞—è', '—Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏—è', '–±–∞—Ö—Ä–æ–º–∞', '–º–∞–ª—è—Ä'];
        
        // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        let grid = [];
        let selectedCells = [];
        let foundWords = new Set();
        let foundWordPositions = new Map();
        let score = 0;
        let soundEnabled = true;
        let isMouseDown = false;
        let startCell = null;
        let timeLeft = 180; // 3 –º–∏–Ω—É—Ç—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        let timerInterval = null;
        let gameActive = true;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∫–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –ø–æ–ª–µ–º
        function initGrid() {
            // –ü–æ–ª–µ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (12x12)
            const predefinedGrid = [
                ['–ø', '–ª', '–≥', '–∑', '—Ü', '–µ', '—ã', '–º', '–±', '–∏', '—å', '–∞'],
                ['—Ä', '–∏', '–µ', '–¥', '–∑', '–ª', '—â', '–∏', '–∞', '–≥', '—Ä', '—è'],
                ['–∏', '–±', '–∫', '–æ', '–∏', '–¥', '—Ñ', '–∫', '–π', '–æ', '—Ñ', '—Å'],
                ['–≤', '–∞', '—Ç', '–Ω', '—Ä', '–º', '–Ω', '—Å', '–ø', '—Å', '–æ', '–∑'],
                ['–∏', '—Å', '–∞', '—ã', '—Ñ', '—å', '–Ω', '—ã', '–∂', '—Ç', '—ç', '–∏'],
                ['–ª', '—Å', '—Ä', '—É', '–º', '–∞', '–ª', '—è', '—Ä', '–∏', '–º', '–æ'],
                ['–µ', '–µ', '–∏', '–∑', '–∂', '–æ', '–≥', '–∞', '–µ', '–Ω', '–±', '—Ñ'],
                ['–≥', '–π', '–∫', '–∞', '–º', '–æ', '—Ä', '–∫', '–∞', '–∞', '–ª', '—å'],
                ['–∏', '–Ω', '–π', '—Ñ', '—ã', '–µ', '—Ä', '–æ', '—ç', '—è', '–µ', '—å'],
                ['—è', '—ë', '–∑', '–ª', '–π', '—Ñ', '—å', '—Å', '–π', '—É', '–º', '—ã'],
                ['—Ä', '—á', '–±', '–∞', '—Ö', '—Ä', '–æ', '–º', '–∞', '–∂', '–∞', '—É'],
                ['—à', '—Ç', '–∏', '–ø', '–æ', '–≥', '—Ä', '–∞', '—Ñ', '–∏', '—è', '—å']
            ];
            
            // –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–¥–∞–Ω–Ω–æ–µ –ø–æ–ª–µ
            grid = predefinedGrid.map(row => [...row]);
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ–≤–∞ –∏–∑ —Å–µ—Ç–∫–∏
        function getWord(r1, c1, r2, c2) {
            let word = '';
            if (r1 === r2) {
                // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å
                for (let c = Math.min(c1, c2); c <= Math.max(c1, c2); c++) {
                    if (c < grid[r1].length) word += grid[r1][c];
                }
            } else if (c1 === c2) {
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å
                for (let r = Math.min(r1, r2); r <= Math.max(r1, r2); r++) {
                    if (r < grid.length) word += grid[r][c1];
                }
            }
            return word;
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏
		function renderGrid() {
		const gridEl = document.getElementById('grid');
		gridEl.innerHTML = '';
    
		for (let r = 0; r < 12; r++) {
        for (let c = 0; c < 12; c++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.textContent = grid[r][c].toUpperCase();
            cell.dataset.row = r;
            cell.dataset.col = c;
            
            // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º—ã—à–∏ –∏ –¥–ª—è –ø–∞–ª—å—Ü–∞
            cell.addEventListener('pointerdown', handlePointerDown);
            cell.addEventListener('pointerenter', handlePointerEnter);
            cell.addEventListener('pointermove', handlePointerMove);
            cell.addEventListener('pointerup', handlePointerUp);
            
            gridEl.appendChild(cell);
        }
    }
    
    // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ (–º—ã—à—å / –ø–∞–ª–µ—Ü)
    document.addEventListener('pointerup', handleGlobalPointerUp);
}


        // –ù–∞—á–∞–ª–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è (–Ω–∞–∂–∞—Ç–∏–µ –º—ã—à–∏)
        function handleMouseDown(e) {
            e.preventDefault();
            if (!gameActive) return;
            
            const row = parseInt(this.dataset.row);
            const col = parseInt(this.dataset.col);
            
            if (this.classList.contains('found')) return;
            
            isMouseDown = true;
            startCell = { row, col };
            selectedCells = [{ row, col }];
            
            this.classList.add('selected');
            playSound('clickSound');
        }
		// –û–±—ë—Ä—Ç–∫–∏: –ø–µ—Ä–µ–≤–æ–¥–∏–º pointer-—Å–æ–±—ã—Ç–∏—è –≤ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –º—ã—à–∏
		function handlePointerDown(e) {
		e.preventDefault();                 // —á—Ç–æ–±—ã –Ω–µ –¥—ë—Ä–≥–∞–ª—Å—è —Å–∫—Ä–æ–ª–ª
		handleMouseDown.call(this, e);
	}

		function handlePointerEnter(e) {
		handleMouseEnter.call(this, e);
	}

		function handlePointerMove(e) {
    // –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–∞–ª—å—Ü–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É –∂–µ –ª–æ–≥–∏–∫—É, —á—Ç–æ –∏ –ø—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ –∫–ª–µ—Ç–∫—É
    handleMouseEnter.call(this, e);
	}

		function handlePointerUp(e) {
    handleMouseUp.call(this, e);
	}

		function handleGlobalPointerUp(e) {
    handleGlobalMouseUp(e);
	}

        // –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –º—ã—à—å—é –ø–æ –∫–ª–µ—Ç–∫–∞–º
        function handleMouseEnter(e) {
            if (!isMouseDown || !startCell || !gameActive) return;
            
            const row = parseInt(this.dataset.row);
            const col = parseInt(this.dataset.col);
            
            if (this.classList.contains('found')) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–≤–∏–∂–µ–º—Å—è –ø–æ –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–∏
            if (!isInLine(startCell, { row, col })) return;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–µ—Ç–∫–∞ –µ—â—ë –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
            const alreadySelected = selectedCells.some(c => c.row === row && c.col === col);
            if (!alreadySelected) {
                selectedCells.push({ row, col });
                this.classList.add('selected');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ª–∏ –∫–ª–µ—Ç–∫–∏ –Ω–∞ –æ–¥–Ω–æ–π –ø—Ä—è–º–æ–π
        function isInLine(cell1, cell2) {
            // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å –∏–ª–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å
            return cell1.row === cell2.row || cell1.col === cell2.col;
        }

        // –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –º—ã—à–∏ –Ω–∞ –∫–ª–µ—Ç–∫–µ
        function handleMouseUp(e) {
            if (!isMouseDown) return;
            checkSelectedWord();
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –º—ã—à–∏ (–≤–Ω–µ —Å–µ—Ç–∫–∏)
        function handleGlobalMouseUp(e) {
            if (!isMouseDown) return;
            isMouseDown = false;
            
            // –ï—Å–ª–∏ –º—ã—à—å –æ—Ç–ø—É—â–µ–Ω–∞ –Ω–µ –Ω–∞ –∫–ª–µ—Ç–∫–µ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
            if (!e.target.classList.contains('cell')) {
                clearSelection();
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
        function checkSelectedWord() {
            isMouseDown = false;
            
            if (selectedCells.length < 2) {
                clearSelection();
                return;
            }

            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–µ—Ç–∫–∏
            const sortedCells = sortCellsInLine(selectedCells);
            if (!sortedCells) {
                clearSelection();
                return;
            }

            const word = sortedCells.map(c => grid[c.row][c.col]).join('');

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–∞–∫–æ–µ —Å–ª–æ–≤–æ –≤ —Å–ø–∏—Å–∫–µ
            if (WORDS.includes(word) && !foundWords.has(word)) {
                // –°–ª–æ–≤–æ –Ω–∞–π–¥–µ–Ω–æ!
                foundWords.add(word);
                score += 10;
                
                foundWordPositions.set(word, sortedCells);
                
                // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–ª–µ—Ç–∫–∏ –∫–∞–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ
                sortedCells.forEach(c => {
                    const cellEl = document.querySelector(`[data-row="${c.row}"][data-col="${c.col}"]`);
                    cellEl.classList.remove('selected');
                    cellEl.classList.add('found');
                });

                markWordAsFound(word);
                updateScore();
                playSound('successSound');
                selectedCells = [];
                startCell = null;

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É
                if (foundWords.size === WORDS.length) {
                    gameActive = false;
                    stopTimer();
                    setTimeout(() => {
                        showVictory();
                    }, 500);
                }
            } else {
                // –ù–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ - —É–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                clearSelection();
            }
        }

        // –û—á–∏—Å—Ç–∫–∞ –≤—ã–±–æ—Ä–∞
        function clearSelection() {
            selectedCells.forEach(c => {
                const cellEl = document.querySelector(`[data-row="${c.row}"][data-col="${c.col}"]`);
                if (cellEl && !cellEl.classList.contains('found')) {
                    cellEl.classList.remove('selected');
                }
            });
            selectedCells = [];
            startCell = null;
            isMouseDown = false;
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–ª–µ—Ç–æ–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å)
        function sortCellsInLine(cells) {
            if (cells.length < 2) return cells;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –∫–ª–µ—Ç–∫–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏–ª–∏ –≤ –æ–¥–Ω–æ–º —Å—Ç–æ–ª–±—Ü–µ
            const allSameRow = cells.every(c => c.row === cells[0].row);
            const allSameCol = cells.every(c => c.col === cells[0].col);

            if (!allSameRow && !allSameCol) {
                return null;
            }

            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–µ—Ç–∫–∏
            const sorted = [...cells].sort((a, b) => {
                if (allSameRow) return a.col - b.col;
                return a.row - b.row;
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å
            for (let i = 1; i < sorted.length; i++) {
                if (allSameRow) {
                    if (sorted[i].col !== sorted[i-1].col + 1) return null;
                } else {
                    if (sorted[i].row !== sorted[i-1].row + 1) return null;
                }
            }

            return sorted;
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–ª–æ–≤
        function renderWordsList() {
            const listEl = document.getElementById('wordsList');
            listEl.innerHTML = '';
            
            WORDS.forEach(word => {
                const li = document.createElement('li');
                li.id = `word-${word}`;
                li.innerHTML = `
                    <span class="word-text">${word.toUpperCase()}</span>
                    <span class="star">‚≠ê</span>
                `;
                listEl.appendChild(li);
            });
        }

        // –ü–æ–º–µ—Ç–∏—Ç—å —Å–ª–æ–≤–æ –∫–∞–∫ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ
        function markWordAsFound(word) {
            const wordEl = document.getElementById(`word-${word}`);
            if (wordEl) {
                wordEl.classList.add('found-word');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞
        function updateScore() {
            document.getElementById('foundCount').textContent = foundWords.size;
            document.getElementById('scoreDisplay').textContent = score;
        }

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞
        function playSound(soundId) {
            if (!soundEnabled) return;
            const sound = document.getElementById(soundId);
            sound.currentTime = 0;
            sound.play().catch(e => console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω:', e));
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
        document.getElementById('soundToggle').onclick = function() {
            soundEnabled = !soundEnabled;
            this.textContent = soundEnabled ? 'üîä' : 'üîá';
        };

        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        function showInstructions() {
            document.getElementById('instructionModal').style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        function closeInstructions() {
            document.getElementById('instructionModal').style.display = 'none';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('instructionModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // –¢–∞–π–º–µ—Ä
        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    stopTimer();
                    gameActive = false;
                    showTimeout();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `‚è±Ô∏è ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏
            timerEl.classList.remove('warning', 'danger');
            if (timeLeft <= 30) {
                timerEl.classList.add('danger');
            } else if (timeLeft <= 60) {
                timerEl.classList.add('warning');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –ø–æ–±–µ–¥—ã
	function showVictory() {
    const minutes = Math.floor((180 - timeLeft) / 60);
    const seconds = (180 - timeLeft) % 60;
    const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    
    document.getElementById('victoryTime').textContent = timeStr;
    document.getElementById('victoryScore').textContent = score;
    document.getElementById('victoryModal').style.display = 'block';

    // –∑–≤—É–∫–∏ –ø–æ–±–µ–¥—ã
    playSound('victorySound');   // —Ñ–∞–Ω—Ñ–∞—Ä—ã
    playSound('fireworkSound');  // —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫

    // –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
    launchFireworks();
}
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        function showTimeout() {
            document.getElementById('timeoutFound').textContent = foundWords.size;
            document.getElementById('timeoutScore').textContent = score;
            document.getElementById('timeoutModal').style.display = 'block';
			
			// –∑–≤—É–∫ "–≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ"
    playSound('timeoutSound');
        }

        // –§–µ–π–µ—Ä–≤–µ—Ä–∫
        function launchFireworks() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff6600', '#ff0066'];
            let fireworkCount = 0;
            
            const fireworkInterval = setInterval(() => {
                if (fireworkCount >= 15) {
                    clearInterval(fireworkInterval);
                    return;
                }
                
                // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –¥–ª—è —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * (window.innerHeight * 0.6);
                
                // –°–æ–∑–¥–∞—ë–º —á–∞—Å—Ç–∏—Ü—ã
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'firework';
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    const angle = (Math.PI * 2 * i) / 30;
                    const velocity = 100 + Math.random() * 100;
                    const tx = Math.cos(angle) * velocity;
                    const ty = Math.sin(angle) * velocity;
                    
                    particle.style.setProperty('--tx', tx + 'px');
                    particle.style.setProperty('--ty', ty + 'px');
                    particle.style.animation = 'explode 1s ease-out forwards';
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 1000);
                }
                
                fireworkCount++;
            }, 300);
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            // –°–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            document.getElementById('victoryModal').style.display = 'none';
            document.getElementById('timeoutModal').style.display = 'none';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            foundWords.clear();
            foundWordPositions.clear();
            score = 0;
            selectedCells = [];
            startCell = null;
            isMouseDown = false;
            timeLeft = 180;
            gameActive = true;
            
            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤—Å—ë
            initGrid();
            renderGrid();
            renderWordsList();
            updateScore();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –∑–∞–Ω–æ–≤–æ
            stopTimer();
            startTimer();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        initGrid();
        renderGrid();
        renderWordsList();
        startTimer();
    </script>
</body>
</html>
